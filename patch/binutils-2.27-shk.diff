--- binutils-2.27/config.sub	2016-08-03 08:36:51.000000000 +0100
+++ binutils-2.27-shk/config.sub	2016-09-18 19:02:27.107213100 +0100
@@ -1378,7 +1378,7 @@
 	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \
 	      | -sym* | -kopensolaris* | -plan9* \
 	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
-	      | -aos* | -aros* | -cloudabi* | -sortix* \
+	      | -aos* | -aros* | -cloudabi* | -sortix* | -shk* \
 	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
 	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
 	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \
--- binutils-2.27/bfd/config.bfd	2016-08-03 08:36:50.000000000 +0100
+++ binutils-2.27-shk/bfd/config.bfd	2016-09-18 19:09:57.662010200 +0100
@@ -271,6 +271,10 @@
     want64=true
     ;;
 #endif /* BFD64 */
+  i386-*-shk*)
+    targ_defvec=i386_elf32_vec
+    targ_selvecs=
+	;;
 
   am33_2.0-*-linux*)
     targ_defvec=am33_elf32_linux_vec
--- binutils-2.27/gas/configure.tgt	2016-08-03 08:36:51.000000000 +0100
+++ binutils-2.27-shk/gas/configure.tgt	2016-09-18 19:07:46.401561100 +0100
@@ -120,6 +120,8 @@
 generic_target=${cpu_type}-$vendor-$os
 # Note: This table is alpha-sorted, please try to keep it that way.
 case ${generic_target} in
+  i386-*-shk*)				fmt=elf ;;
+
   aarch64*-*-elf | aarch64*-*-rtems*)	fmt=elf;;
   aarch64*-*-linux*)			fmt=elf em=linux ;;
 
--- binutils-2.27/ld/configure.tgt	2016-08-03 08:36:54.000000000 +0100
+++ binutils-2.27-shk/ld/configure.tgt	2016-09-18 19:10:02.440948100 +0100
@@ -45,6 +45,10 @@
 # architecture variants should be kept together even if their names
 # break the alpha sorting.
 case "${targ}" in
+i386-*-shk*)
+			targ_emul=elf_i386_shk
+			targ_extra_emuls=elf_i386
+			;;
 aarch64_be-*-elf)	targ_emul=aarch64elfb
 			targ_extra_emuls="aarch64elf aarch64elf32 aarch64elf32b armelfb armelf" ;;
 aarch64-*-elf | aarch64-*-rtems*)
--- binutils-2.27/ld/emulparams/elf_i386_shk.sh	1970-01-01 01:00:00.000000000 +0100
+++ binutils-2.27-shk/ld/emulparams/elf_i386_shk.sh	2016-09-18 19:12:32.332087200 +0100
@@ -0,0 +1,3 @@
+. ${srcdir}/emulparams/elf_i386.sh
+GENERATE_SHLIB_SCRIPT=yes
+GENERATE_PIE_SCRIPT=yes
--- binutils-2.27/ld/Makefile.am	2016-08-03 08:36:54.000000000 +0100
+++ binutils-2.27-shk/ld/Makefile.am	2016-09-18 19:17:06.299025800 +0100
@@ -156,6 +156,7 @@
 LIBIBERTY = ../libiberty/libiberty.a
 
 ALL_EMULATION_SOURCES = \
+	eelf_i386_shk.c \
 	eaix5ppc.c \
 	eaix5rs6.c \
 	eaixppc.c \
@@ -1312,6 +1313,10 @@
 eelf_i386.c: $(srcdir)/emulparams/elf_i386.sh \
   $(ELF_X86_DEPS) $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
 
+eelf_i386_shk.c: $(srcdir)/emulparams/elf_i386_shk.sh \
+  $(ELF_DEPS) $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
+	${GENSCRIPTS} elf_i386_shk "$(tdir_elf_i386_shk)"
+
 eelf_i386_be.c: $(srcdir)/emulparams/elf_i386_be.sh \
   $(ELF_DEPS) $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
 
